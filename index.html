<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SafeStep Platform - Disaster Training Management</title>
    <link rel="stylesheet" href="style.css" />
    <!-- Chart.js for charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Leaflet for maps -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo-text">
          <h1>SafeStep</h1>
          <p class="tagline">Disaster Training & Management Platform</p>
        </div>
        <nav class="nav-menu">
          <a href="#dashboard" class="nav-link active">Dashboard</a>
          <a href="#trainings" class="nav-link">Training Events</a>
          <a href="#analytics" class="nav-link">Analytics</a>
          <a href="#reports" class="nav-link">Reports</a>
        </nav>
        <div class="auth-buttons">
          <button id="signInBtn" class="btn btn-primary">Sign In</button>
          <button id="logInBtn" class="btn btn-outline">Log In</button>
        </div>
      </div>
    </header>

    <!-- Main Content Area -->
    <div class="main-content" style="display: none">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <h3>Navigation</h3>
        </div>
        <ul class="sidebar-menu">
          <li>
            <a href="#dashboard" class="sidebar-link active">üìä Dashboard</a>
          </li>
          <li>
            <a href="#trainings" class="sidebar-link">üìö Training Events</a>
          </li>
          <li>
            <a href="#myenrollments" class="sidebar-link">üìã My Enrollments</a>
          </li>
          <li><a href="#profile" class="sidebar-link">üë§ My Profile</a></li>
          <li><a href="#settings" class="sidebar-link">‚öôÔ∏è Settings</a></li>
          <li
            id="adminMenuSeparator"
            style="
              border-top: 1px solid #dee2e6;
              margin-top: 1rem;
              padding-top: 1rem;
            "
          >
            <strong
              style="
                padding: 0 1.5rem;
                color: #6c757d;
                font-size: 0.75rem;
                text-transform: uppercase;
              "
              >Admin</strong
            >
          </li>
          <li id="adminTrainingsMenu" style="display: none">
            <a href="#admin-trainings" class="sidebar-link"
              >‚öôÔ∏è Manage Trainings</a
            >
          </li>
          <li id="adminAttendanceMenu" style="display: none">
            <a href="#admin-attendance" class="sidebar-link"
              >‚úÖ Mark Attendance</a
            >
          </li>
          <li id="adminReportsMenu" style="display: none">
            <a href="#admin-reports" class="sidebar-link">üìä Reports</a>
          </li>
        </ul>
      </aside>

      <!-- Content Area -->
      <main class="content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
          <h2>Dashboard</h2>
          <div class="stats-grid">
            <div class="stat-card">
              <h3>Total Trainings</h3>
              <p class="stat-value" data-stat="total_trainings">156</p>
              <span class="stat-change">+12% from last month</span>
            </div>
            <div class="stat-card">
              <h3>Total Participants</h3>
              <p class="stat-value" data-stat="total_participants">4,200</p>
              <span class="stat-change">+8% from last month</span>
            </div>
            <div class="stat-card">
              <h3>States Covered</h3>
              <p class="stat-value" data-stat="states_covered">28</p>
              <span class="stat-change">All regions active</span>
            </div>
            <div class="stat-card">
              <h3>Active Alerts</h3>
              <p class="stat-value">32</p>
              <span class="stat-change">require attention</span>
            </div>
          </div>

          <div class="chart-container">
            <h3>Monthly Training Trends</h3>
            <canvas id="trendsChart"></canvas>
          </div>

          <div class="recent-events">
            <h3>Recent Training Events</h3>
            <div class="events-list">
              <div class="event-item">
                <h4>Disaster Response Training - Mumbai</h4>
                <p>Oct 15-17, 2025 | Dr. Sunita Patel | 42/50 enrolled</p>
              </div>
              <div class="event-item">
                <h4>Risk Assessment Workshop - Delhi</h4>
                <p>Oct 20-22, 2025 | Dr. Rajesh Kumar | 28/30 enrolled</p>
              </div>
              <div class="event-item">
                <h4>Community Engagement Training - Kolkata</h4>
                <p>Oct 25-26, 2025 | Priya Sharma | 35/40 enrolled</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Training Events Section -->
        <section id="trainings" class="section">
          <h2>Training Events</h2>
          <p>
            Training events management interface - Browse and enroll in
            available trainings
          </p>
        </section>

        <!-- My Enrollments Section -->
        <section id="myenrollments" class="section">
          <h2>My Enrollments</h2>
          <p>View your enrolled trainings and enrollment status</p>
        </section>

        <!-- Profile Section -->
        <section id="profile" class="section">
          <h2>My Profile</h2>
          <p>View and manage your profile information</p>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="section">
          <h2>Settings</h2>
          <p>Application settings and preferences</p>
        </section>

        <!-- Admin Training Management Section -->
        <section id="admin-trainings" class="section" style="display: none">
          <h2>Admin - Manage Trainings</h2>
          <p>Edit training details, mark attendance, and generate reports</p>

          <div class="admin-panel">
            <h3>Training Management</h3>
            <div id="adminTrainingsList" class="training-admin-list"></div>
          </div>
        </section>

        <!-- Admin Attendance Section -->
        <section id="admin-attendance" class="section" style="display: none">
          <h2>Admin - Mark Attendance</h2>

          <div class="admin-panel">
            <h3>Select Training & Mark Attendance</h3>
            <div class="form-group">
              <label>Select Training Event</label>
              <select id="attendanceTrainingSelect" class="form-input">
                <option value="">Choose a training...</option>
              </select>
            </div>

            <div id="attendanceParticipants" style="display: none">
              <h4>Participants</h4>
              <div id="participantsList" class="participants-checklist"></div>
              <button
                onclick="submitAttendance()"
                class="btn btn-primary"
                style="margin-top: 1rem"
              >
                Mark Attendance
              </button>
            </div>
          </div>
        </section>

        <!-- Admin Reports Section -->
        <section id="admin-reports" class="section" style="display: none">
          <h2>Admin - Reports & Downloads</h2>

          <div class="admin-panel">
            <h3>Training Reports</h3>
            <div class="form-group">
              <label>Select Training for Report</label>
              <select id="reportTrainingSelect" class="form-input">
                <option value="">Choose a training...</option>
              </select>
            </div>

            <div id="reportContainer" style="display: none; margin-top: 2rem">
              <h4>Report Summary</h4>
              <div class="report-stats">
                <div class="stat-box">
                  <span class="stat-label">Total Enrolled</span>
                  <span class="stat-value" id="reportTotalEnrolled">0</span>
                </div>
                <div class="stat-box">
                  <span class="stat-label">Present</span>
                  <span class="stat-value" id="reportPresent">0</span>
                </div>
                <div class="stat-box">
                  <span class="stat-label">Absent</span>
                  <span class="stat-value" id="reportAbsent">0</span>
                </div>
                <div class="stat-box">
                  <span class="stat-label">Attendance Rate</span>
                  <span class="stat-value" id="reportAttendanceRate">0%</span>
                </div>
              </div>

              <div id="participantsReport" style="margin-top: 1.5rem"></div>

              <button
                onclick="downloadReport()"
                class="btn btn-primary"
                style="margin-top: 1.5rem"
              >
                üì• Download Report (CSV)
              </button>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Sign In Modal -->
    <div id="signInModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Create Account</h2>
          <button type="button" class="modal-close" id="closeSignIn">
            &times;
          </button>
        </div>
        <form id="signInForm" class="auth-form">
          <div class="form-group">
            <label for="signInName" class="form-label">Full Name</label>
            <input
              type="text"
              id="signInName"
              class="form-input"
              placeholder="Your full name"
              required
            />
          </div>

          <div class="form-group">
            <label for="signInEmail" class="form-label">Email</label>
            <input
              type="email"
              id="signInEmail"
              class="form-input"
              placeholder="your@email.com"
              required
            />
          </div>

          <div class="form-group">
            <label for="signInRole" class="form-label">Role</label>
            <select id="signInRole" class="form-input" required>
              <option value="">Select a role</option>
              <option value="NDMA Admin">NDMA Admin</option>
              <option value="State Admin">State Admin</option>
              <option value="District/SDMA">District/SDMA</option>
              <option value="Trainer">Trainer</option>
              <option value="Participant">Participant</option>
            </select>
          </div>

          <div class="form-group">
            <label for="signInState" class="form-label">State</label>
            <select id="signInState" class="form-input" required>
              <option value="">Select a state</option>
              <option value="Andhra Pradesh">Andhra Pradesh</option>
              <option value="Arunachal Pradesh">Arunachal Pradesh</option>
              <option value="Assam">Assam</option>
              <option value="Bihar">Bihar</option>
              <option value="Chhattisgarh">Chhattisgarh</option>
              <option value="Goa">Goa</option>
              <option value="Gujarat">Gujarat</option>
              <option value="Haryana">Haryana</option>
              <option value="Himachal Pradesh">Himachal Pradesh</option>
              <option value="Jharkhand">Jharkhand</option>
              <option value="Karnataka">Karnataka</option>
              <option value="Kerala">Kerala</option>
              <option value="Madhya Pradesh">Madhya Pradesh</option>
              <option value="Maharashtra">Maharashtra</option>
              <option value="Manipur">Manipur</option>
              <option value="Meghalaya">Meghalaya</option>
              <option value="Mizoram">Mizoram</option>
              <option value="Nagaland">Nagaland</option>
              <option value="Odisha">Odisha</option>
              <option value="Punjab">Punjab</option>
              <option value="Rajasthan">Rajasthan</option>
              <option value="Sikkim">Sikkim</option>
              <option value="Tamil Nadu">Tamil Nadu</option>
              <option value="Telangana">Telangana</option>
              <option value="Tripura">Tripura</option>
              <option value="Uttar Pradesh">Uttar Pradesh</option>
              <option value="Uttarakhand">Uttarakhand</option>
              <option value="West Bengal">West Bengal</option>
              <option value="Delhi">Delhi</option>
            </select>
          </div>

          <div class="form-group">
            <label for="signInPassword" class="form-label">Password</label>
            <input
              type="password"
              id="signInPassword"
              class="form-input"
              placeholder="Minimum 6 characters"
              required
            />
          </div>

          <div class="form-group">
            <label for="signInConfirmPassword" class="form-label"
              >Confirm Password</label
            >
            <input
              type="password"
              id="signInConfirmPassword"
              class="form-input"
              placeholder="Confirm your password"
              required
            />
          </div>

          <button type="submit" class="btn btn-primary btn-full">
            Create Account
          </button>

          <div class="form-footer">
            Already have an account?
            <a href="#" id="switchToLogIn">Log In here</a>
          </div>
        </form>
      </div>
    </div>

    <!-- Log In Modal -->
    <div id="logInModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Log In</h2>
          <button type="button" class="modal-close" id="closeLogIn">
            &times;
          </button>
        </div>
        <form id="logInForm" class="auth-form">
          <div class="form-group">
            <label for="logInEmail" class="form-label">Email</label>
            <input
              type="email"
              id="logInEmail"
              class="form-input"
              placeholder="your@email.com"
              required
            />
          </div>

          <div class="form-group">
            <label for="logInPassword" class="form-label">Password</label>
            <input
              type="password"
              id="logInPassword"
              class="form-input"
              placeholder="Your password"
              required
            />
          </div>

          <button type="submit" class="btn btn-primary btn-full">Log In</button>

          <div class="form-footer">
            Don't have an account?
            <a href="#" id="switchToSignIn">Sign Up here</a>
          </div>
        </form>

        <div class="demo-credentials">
          <p><strong>Demo Credentials:</strong></p>
          <p>Email: rajesh.kumar@ndma.gov.in</p>
          <p>Password: admin123</p>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
  </body>
</html>
